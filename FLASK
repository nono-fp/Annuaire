from flask import Flask, render_template, request
import pandas


app = Flask(__name__)

@app.route('/')
def index():
 return render_template('index.html')

@app.route('/ajouter')
def ajouter():
  return render_template("ajouter.html",)

@app.route('/rechercher')
def rechercher():
  return render_template("rechercher.html",)

@app.route('/resultat',methods = ['GET'])
def resultat():
    result=request.args
    nom=result['nom']
    numero=result['numero']
    data = pandas.read_csv("mon_fichier.csv")
    tab_num=data.loc[:,"numero"]
    for num in tab_num :
        if num==numero:
            return render_template('erreur.html',)
    if nom=='' and numero=='':
        return render_template('erreur.html',)
    numero=int(numero)
    data = data.append(pandas.DataFrame({"nom":[nom] , "numero": [numero]}),ignore_index = True)
    df = pandas.DataFrame(data)
    df.to_csv('mon_fichier.csv', index=False)
    return render_template('resultat.html',nom=nom,numero=numero)

@app.route('/erreur',methods = ['GET'])
def erreur():
    return render_template('ajouter.html',)

@app.route('/resultat2',methods = ['GET'])
def resultat2():
    result=request.args
    nom=result['nom']
    data = pandas.read_csv("mon_fichier.csv")
    tab_numero=data.loc[data["nom"]==nom,["numero"]]
    numero=int(tab_numero.iloc[0][0])
    return render_template('resultat2.html',nom=nom,numero=numero)


app.run(debug=True)
